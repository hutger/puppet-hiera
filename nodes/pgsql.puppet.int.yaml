---
classes:
#  - postgresql::globals
  - postgresql::server

postgresql::globals::manage_package_repo:  true
postgresql::globals::version: '12'

postgresql::server::ip_mask_allow_all_users: '0.0.0.0/0'
postgresql::server::listen_addresses: "%{lookup('pgsql_host_name')}"
postgresql::server::postgres_password: 'kermit'


postgresql::server::db:
  'gitlabhq_production':
    user:       'gitlab'
    password:   'kermit123'
    grant:      'ALL'
    owner:      'gitlab'

# Alter to 'false' after the first deployment

postgresql::server::role:
  'gitlab':
    superuser: true
  